{"ast":null,"code":"export function pluralize(name, count) {\n  if (count === 1) {\n    return name;\n  }\n\n  return name + 's';\n}\nexport function idbPromise(storeName, method, object) {\n  return new Promise((resolve, reject) => {\n    const request = window.indexedDB.open('shop-shop', 1);\n    let db, tx, store;\n\n    request.onupgradeneeded = function (e) {\n      const db = request.result;\n      db.createObjectStore('products', {\n        keyPath: '_id'\n      });\n      db.createObjectStore('categories', {\n        keyPath: '_id'\n      });\n      db.createObjectStore('cart', {\n        keyPath: '_id'\n      });\n    };\n\n    request.onerror = function (e) {\n      console.log('There was an error');\n    };\n\n    request.onsuccess = function (e) {\n      db = request.result;\n      tx = db.transaction(storeName, 'readwrite');\n      store = tx.objectStore(storeName);\n\n      db.onerror = function (e) {\n        console.log('error', e);\n      };\n\n      switch (method) {\n        case 'put':\n          store.put(object);\n          resolve(object);\n          break;\n\n        case 'get':\n          const all = store.getAll();\n\n          all.onsuccess = function () {\n            resolve(all.result);\n          };\n\n          break;\n\n        case 'delete':\n          store.delete(object._id);\n          break;\n\n        default:\n          console.log('No valid method');\n          break;\n      }\n\n      tx.oncomplete = function () {\n        db.close();\n      };\n    };\n  });\n}","map":{"version":3,"names":["pluralize","name","count","idbPromise","storeName","method","object","Promise","resolve","reject","request","window","indexedDB","open","db","tx","store","onupgradeneeded","e","result","createObjectStore","keyPath","onerror","console","log","onsuccess","transaction","objectStore","put","all","getAll","delete","_id","oncomplete","close"],"sources":["C:/Users/RiniPeni/Documents/Developer/ReactApps/LeCookBook/client/src/utils/helpers.js"],"sourcesContent":["export function pluralize(name, count) {\r\n  if (count === 1) {\r\n    return name;\r\n  }\r\n  return name + 's';\r\n}\r\n\r\nexport function idbPromise(storeName, method, object) {\r\n  return new Promise((resolve, reject) => {\r\n    const request = window.indexedDB.open('shop-shop', 1);\r\n    let db, tx, store;\r\n    request.onupgradeneeded = function(e) {\r\n      const db = request.result;\r\n      db.createObjectStore('products', { keyPath: '_id' });\r\n      db.createObjectStore('categories', { keyPath: '_id' });\r\n      db.createObjectStore('cart', { keyPath: '_id' });\r\n    };\r\n\r\n    request.onerror = function(e) {\r\n      console.log('There was an error');\r\n    };\r\n\r\n    request.onsuccess = function(e) {\r\n      db = request.result;\r\n      tx = db.transaction(storeName, 'readwrite');\r\n      store = tx.objectStore(storeName);\r\n\r\n      db.onerror = function(e) {\r\n        console.log('error', e);\r\n      };\r\n\r\n      switch (method) {\r\n        case 'put':\r\n          store.put(object);\r\n          resolve(object);\r\n          break;\r\n        case 'get':\r\n          const all = store.getAll();\r\n          all.onsuccess = function() {\r\n            resolve(all.result);\r\n          };\r\n          break;\r\n        case 'delete':\r\n          store.delete(object._id);\r\n          break;\r\n        default:\r\n          console.log('No valid method');\r\n          break;\r\n      }\r\n\r\n      tx.oncomplete = function() {\r\n        db.close();\r\n      };\r\n    };\r\n  });\r\n}\r\n"],"mappings":"AAAA,OAAO,SAASA,SAAT,CAAmBC,IAAnB,EAAyBC,KAAzB,EAAgC;EACrC,IAAIA,KAAK,KAAK,CAAd,EAAiB;IACf,OAAOD,IAAP;EACD;;EACD,OAAOA,IAAI,GAAG,GAAd;AACD;AAED,OAAO,SAASE,UAAT,CAAoBC,SAApB,EAA+BC,MAA/B,EAAuCC,MAAvC,EAA+C;EACpD,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACtC,MAAMC,OAAO,GAAGC,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsB,WAAtB,EAAmC,CAAnC,CAAhB;IACA,IAAIC,EAAJ,EAAQC,EAAR,EAAYC,KAAZ;;IACAN,OAAO,CAACO,eAAR,GAA0B,UAASC,CAAT,EAAY;MACpC,MAAMJ,EAAE,GAAGJ,OAAO,CAACS,MAAnB;MACAL,EAAE,CAACM,iBAAH,CAAqB,UAArB,EAAiC;QAAEC,OAAO,EAAE;MAAX,CAAjC;MACAP,EAAE,CAACM,iBAAH,CAAqB,YAArB,EAAmC;QAAEC,OAAO,EAAE;MAAX,CAAnC;MACAP,EAAE,CAACM,iBAAH,CAAqB,MAArB,EAA6B;QAAEC,OAAO,EAAE;MAAX,CAA7B;IACD,CALD;;IAOAX,OAAO,CAACY,OAAR,GAAkB,UAASJ,CAAT,EAAY;MAC5BK,OAAO,CAACC,GAAR,CAAY,oBAAZ;IACD,CAFD;;IAIAd,OAAO,CAACe,SAAR,GAAoB,UAASP,CAAT,EAAY;MAC9BJ,EAAE,GAAGJ,OAAO,CAACS,MAAb;MACAJ,EAAE,GAAGD,EAAE,CAACY,WAAH,CAAetB,SAAf,EAA0B,WAA1B,CAAL;MACAY,KAAK,GAAGD,EAAE,CAACY,WAAH,CAAevB,SAAf,CAAR;;MAEAU,EAAE,CAACQ,OAAH,GAAa,UAASJ,CAAT,EAAY;QACvBK,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBN,CAArB;MACD,CAFD;;MAIA,QAAQb,MAAR;QACE,KAAK,KAAL;UACEW,KAAK,CAACY,GAAN,CAAUtB,MAAV;UACAE,OAAO,CAACF,MAAD,CAAP;UACA;;QACF,KAAK,KAAL;UACE,MAAMuB,GAAG,GAAGb,KAAK,CAACc,MAAN,EAAZ;;UACAD,GAAG,CAACJ,SAAJ,GAAgB,YAAW;YACzBjB,OAAO,CAACqB,GAAG,CAACV,MAAL,CAAP;UACD,CAFD;;UAGA;;QACF,KAAK,QAAL;UACEH,KAAK,CAACe,MAAN,CAAazB,MAAM,CAAC0B,GAApB;UACA;;QACF;UACET,OAAO,CAACC,GAAR,CAAY,iBAAZ;UACA;MAhBJ;;MAmBAT,EAAE,CAACkB,UAAH,GAAgB,YAAW;QACzBnB,EAAE,CAACoB,KAAH;MACD,CAFD;IAGD,CA/BD;EAgCD,CA9CM,CAAP;AA+CD"},"metadata":{},"sourceType":"module"}